@{
    ViewData["Title"] = "Home Page";
    var process = ViewBag.Processes;
    //Layout = "_MenuLayout.cshtml";

}
<link href="~/css/site.css" rel="stylesheet" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/jquery.bootstrapvalidator/0.5.2/css/bootstrapValidator.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />

<link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css' rel='stylesheet'>


<style>
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }

    input[type=number] {
        -moz-appearance: textfield;
    }

    .modal-backdrop {
        opacity: 0 !important;
    }

    ul {
        list-style-type: none; /* Remove bullets */
        padding: 0; /* Remove padding */
        margin: 0; /* Remove margins */
    }

    li {
        transform: scale(1);
        margin: 10px;
    }

    #dialog.modal-dialog {
        position: fixed;
        bottom: 0;
        right: 0;
        margin: 0;
    }


    th {
        text-align: center !important;
        font-weight: bold !important;
    }

    .modal:nth-of-type(even) {
        z-index: 1062 !important;
    }

    .modal-backdrop.show:nth-of-type(even) {
        z-index: 1061 !important;
    }

    .custom-popover {
        --bs-popover-max-width: 700px !important;
        --bs-popover-border-color: var(--bs-primary);
        --bs-popover-header-bg: var(--bs-primary);
        --bs-popover-header-color: var(--bs-white);
        --bs-popover-body-padding-x: 1rem;
        --bs-popover-body-padding-y: .5rem;
    }

    .popover {
        width: 700px !important;
        position: center;
    }

    #alertModal.fade .modal-dialog {
        transform: translate3d(0, -100vh, 0);
    }

    #alertModal.show .modal-dialog {
        transform: translate3d(0,0, 0);
    }

    .red {
        outline: 2px solid red;
    }

    .green {
        outline: 2px solid green;
    }
</style>

<header>
    <nav id="sidebarMenu"
         class="collapse d-lg-block sidebar collapse bg-white">
        <div class="position-sticky">
            <div class="list-group list-group-flush mx-3 mt-4">
                <a href="~/Home/Index"
                   class="list-group-item list-group-item-action py-2 ripple"
                   aria-current="true">
                    <i class="fas fa-tachometer-alt fa-fw me-3"></i>
                </a>
                <a href="~/Home/Index"
                   class="list-group-item list-group-item-action py-2 ripple" id="zleceniaButton">
                    <i class="fas fa-chart-area fa-fw me-3"></i><span>Zlecenia</span>
                </a>
                <a href="~/MachineProcess/ProcessMachineSelecting"
                   class="list-group-item list-group-item-action py-2 ripple active" id="zamówieniaButton">
                    <i class="fas fa-chart-pie fa-fw me-3"></i><span>Zamówienia</span>
                </a>
                <a href="~/Home/Warehouse"
                   class="list-group-item list-group-item-action py-2 ripple" id="magazyn">
                    <i class="fas fa-chart-pie fa-fw me-3"></i><span>Magazyn</span>
                </a>
                <a href="~/Waste/Index"
                   class="list-group-item list-group-item-action py-2 ripple" id="magazyn">
                    <i class="fas fa-chart-pie fa-fw me-3"></i><span>Odpad</span>
                </a>
            </div>
        </div>
    </nav>
    <nav id="main-navbar"
         class="navbar navbar-expand-lg navbar-light bg-white fixed-top">
        <div class="container-fluid">
            <a class="navbar-brand" href="~/Home/Index">
                <img src="~/Logo.png" />
            </a>
            <a id="customButton" role="button" style="float:right" class="btn btn-success" asp-action="Logout" asp-controller="Home">Logout <i class="fa-solid fa-arrow-right-from-bracket"></i></a>
        </div>

    </nav>

</header>

<main style="margin-top: 130px">
    <a style="margin-bottom: 10px; color: white" id="nZamówienie" hidden class="btn btn-primary " data-bs-toggle="modal" data-bs-target="#newOrder">Zamówienie</a>

    <form class="col text-center">
        <div class="list-group-horizontal-sm d-inline-flex align-items-center w-auto">
            <div class="list-group-item">
                <div class="d-inline-flex col text-center">
                    <label for="zleceniaList" style="font-size:20px">[Orders]</label>
                    <select id="zleceniaList" class="form-select" asp-items="@ViewBag.Zlecenia" style="margin-left: 20px; width: 200px; border-color: black; text-align-last: center">
                        <option value="-1" id="defaultOptionForOrder">Select order</option>
                    </select>
                </div>
            </div>
            <div class="list-group-item" style="margin-left:80px">
                <div class="d-inline-flex col text-center">
                    <label for="processList" style="font-size:20px">[Process]</label>
                    <select id="processList" style="margin-left: 20px; width: 200px; border-color: black; text-align-last: center" class="form-select" asp-items="@ViewBag.Processes">
                        <option value="-1" id="defaultOptionForProcess">Select process</option>
                    </select>
                </div>
            </div>
            <div class="list-group-item" style="margin-left:80px" id="machineBlock" hidden>
                <div class="d-inline-flex col text-center">
                    <label for="machinesList" style="font-size:20px">[Machine]</label>
                    <select id="machinesList" class="form-select machinesList" style="margin-left: 20px; width: 200px; border-color: black; text-align-last: center">
                    </select>
                </div>
            </div>


        </div>
    </form>
    <div class="container" style="margin-top:50px" id="container">
        <table id="orders" class="table table-striped table-bordered display" style="width:100%;margin-top:50px;">
            <thead>
                <tr>
                    <th style="text-align: center"></th>
                    <th id="nMaterialu">Nr. materialu</th>
                    <th id="nazwa">Nazwa produktu</th>
                    <th id="count">Ilość (kg/szt.)</th>
                    <th></th>
                </tr>


            </thead>
        </table>
    </div>
    <div class="modal hide fade" id="newOrder" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="title" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="title">Nowe zamówienie</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" id="closeNewZlecenie" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="noweZamówienie">
                        <div class="modal-body">
                            <div class="form-group row">
                                <label for="process" class="col-sm-2 col-form-label">Process</label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="process" readonly style="margin-top:5px;" />
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="machine" class="col-sm-2 col-form-label">Machine</label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="machine" readonly style="margin-top:5px;" />
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="nrZlecenia" class="col-sm-2 col-form-label">Numer zlecenia</label>
                                <div class="col-sm-6">
                                    <input class="form-control" id="nrZlecenia" readonly style="margin-top:5px;" />
                                </div>
                            </div>
                            <div id="enterNumberSection" hidden>
                                <div class="form-group row">
                                    <label for="nrMaterialu" class="col-sm-2 col-form-label">Numer materialu</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="nrMaterialu" placeholder="Wpisz numer materialu" />
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label for="ilość" class="col-sm-2 col-form-label">Ilość</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" id="ilość" placeholder="Wpisz ilość zamawianego materialu" />
                                    </div>
                                    <div class="col-sm-12">
                                        <span id="warningText" style="color:red; font-size:small; font-style:normal"></span>
                                    </div>
                                </div>
                                <div class="modal-footer" style="width:100%; margin-top:20px">
                                    <p>*wszyskie nięzbędne surowce już były zamówione. Wpisz numer materialu oraz ilość i zostaw komętarz!</p>
                                    <div class="form-group" style="width:100%">

                                        <div class="col text-center">
                                            <button type="button" class="btn btn-primary callPopover" disabled data-bs-custom-class="custom-popover" id="popover" data-bs-toggle="popover">Dalej</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div id="chekBoxSection" hidden>
                                <div class="form-group" style="width:100%; margin-top: 5px">

                                    <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" onclick="SelectBoxes()">
                                        Wybierz z listy
                                    </button>

                                    <input value="0" hidden id="count" />
                                </div>
                                <div class="form-group" style="width:100%; margin-top: 5px;">
                                    <div class="container">
                                        <div class="row" style="width:100%">
                                            <div class="col-lg-10" style="float:left;width:50%">
                                                <ul id="list" class="list-group-horizontal-sm" hidden style="padding:5px;">
                                                </ul>

                                            </div>
                                            <div class="col-lg-10" style="float: right !important; width: 50%">
                                                <ul id="list2" class="list-group-horizontal-sm" hidden style="padding:5px;">
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer" style="width:100%">
                                    <div class="form-group" style="width:100%">
                                        <div class="col text-center">
                                            <a class="btn btn-primary" id="saveChSection" data-bs-dismiss="modal" disabled onclick="Check()">Zamów</a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <section>
        <div id="PopoverContent" class="d-none">
            <div class="input-group">
                <input type="text" class="form-control" id="popperInput" oninput="CheckComent(this)" autofocus placeholder="Prosze wpisać komentarz" aria-label="Komentarz">
                <div class="col-sm-12">
                    <span id="popperWarningText" style="color:red; font-size:small; font-style:normal"></span>
                </div>
            </div>
            <div class="col text-center" style="margin-top:20px">
                <button class="btn btn-primary" data-bs-dismiss="modal" disabled id="saveNSection" onclick="AddByNum()">Zamów</button>
            </div>
        </div>
    </section>

</main>

<footer>
    <div class="col text-center">
        <div class="modal fade" id="alertModal" style="height: min-content; " tabindex="-1" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content" style="background-color: transparent;border:none">

                    <div class="modal-body" style="background-color: transparent">
                        <p id="textAlert"></p>
                    </div>
                </div>
            </div>

        </div>
    </div>

</footer>




@section Scripts{
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.6/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js" integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/dataTables.bootstrap5.min.js"></script>
    <script src="~/js/site.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"
            integrity="sha256-lSjKY0/srUM9BE3dPm+c4fBo1dky2v27Gdjm2uoZaL0="
            crossorigin="anonymous"></script>

    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/dataTables.jqueryui.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        var regExp = /[0-9][0-9][0-9][0-9][0-9][0-9][0-9]/;
        var button = GetDoc("addList");
        var number = GetDoc('numberCount');
        var proces = GetDoc('process');
        var machine = GetDoc('machine');
        var nrZlecenia = GetDoc('nrZlecenia');
        var nrMaterialu = GetDoc('nrMaterialu');
        var count = GetDoc('ilość');
        var processList = GetDoc('processList');
        var machineList = GetDoc('machinesList');
        var zleceniaList = GetDoc('zleceniaList');
        var saveclass = null;

        $(document).ready(function () {

                    $('#zleceniaList').on('change', function () {
                        var selVal = $(this).val();
                        sessionStorage.setItem("SelItem", selVal);
                    });
                    $('#machinesList').on('change', function () {
                        var optionsListNames = [...machineList.options].map(t => t.text);
                        var optionsListValues = [...machineList.options].map(t => t.value);
                        var selected = $(this).val();
                        sessionStorage.setItem("Machines", JSON.stringify(optionsListNames));
                        sessionStorage.setItem("Values", JSON.stringify(optionsListValues));
                        sessionStorage.setItem("Option", selected);

                    });


        $('#newOrder').modal({ backdrop: 'static', keyboard: false });
        const popover = new bootstrap.Popover(document.querySelector('.callPopover'), {
            container: '.modal-content',
            title: 'Komentarz',
            html: true,
            placement: 'top',
            sanitize: false,
            content() {
                return document.querySelector('#PopoverContent').innerHTML;
            }
        })
        $('#textAlert').css({ "text - align": "center", "color": "green", "font-weight": 600 });

        $('#processList').on('change', function () {
            $.ajax({
                method: 'Get',
                url: '/MachineProcess/MachineList',
                data: { 'processId': $('#processList').val() },
                success: function (data) {
                    if ($('#processList option:selected').val() != -1) {

                        RemHidden('#machineBlock');
                        RemHidden('#blockZamówienia');
                        var items = '<option value="-1" id="defaultOptionForMachine">Select machine</option>';
                        for (var i = 0; i < data['id'].length; i++) {
                           items += "<option value=" +data['id'][i]+ ">" + data['name'][i] + "</option>";
                        }
                        $('#machinesList').html(items);
                        sessionStorage.setItem("Process", $('#processList option:selected').val());
                    } else {
                        $('#machinesList option:selected').val(-1);
                        Hidden('#machineBlock');
                        Hidden('#blockZamówienia');
                        Hidden('#nZamówienie');
                    }

                }
            })
           /* $('#dropdownMenuButton').on('click', function () {

                var num = $('#count').val();
                if (num == 0) {
                    RemHidden('#list');
                    RemHidden('#list2');
                    $('#count').val(num + 1);
                } else {
                    Hidden('#list');
                    Hidden('#list2');
                    $('#count').val(num - 1);
                    $('.form-check-input').prop('checked', false);
                }

            }) */
        })
        TableUpdate();
        $('select').on('change', function () {
            if (zleceniaList.value > 0 && processList.value > 0 && machineList.value > 0) {
                RemHidden('#nZamówienie');

            }
            else {
                $('#nZamówienie').attr('hidden', 'true');
            }
            EmptyContainer();
            TableUpdate();
        })
        $('#newOrder').on('hidden.bs.modal', function () {
            $(this).find('#noweZamówienie').trigger('reset');
            $('#warningText').text("");
            count.classList.remove("red");
            count.classList.remove("green");

        })

      // ----> изначально было??  $('#blockZamówienia').on('click', function () {
        $('#nZamówienie').on('click', function () {
        $.ajax({
            type: 'Get',
            url: '/MachineProcess/GetIngredients',
            dataType: 'json',
            data: { 'zlecenieNumber': parseInt($('#zleceniaList option:selected').text()) },
                success: function (data) {
                    proces.value = $('#processList option:selected').text();
                    machine.value = $('#machinesList option:selected').text();
                    nrZlecenia.value = $('#zleceniaList option:selected').text();

                    if (data['num'] == 0) {
                        RemHidden('#enterNumberSection');
                        GetDoc('ilość').addEventListener('keyup', function () {
                            var dataPass = [nrMaterialu.value, this.value];
                            $.ajax({
                                type: 'Get',
                                url: '@Url.Action("GetСount", "MachineProcess")/' + dataPass,
                                success: function (data) {
                                    if (JSON.stringify(data) == 2) {
                                        $('#warningText').text("Chcesz zamówić o wiele więcej niż jest potrzebno na wykonania tego zlecenia! ");
                                        $('#popover').attr('disabled', 'true');
                                        count.classList.remove("green");
                                        count.classList.add("red");
                                    }
                                    else if (JSON.stringify(data) == 3) {
                                        $('#warningText').text("Sprawdz ilość zamawianego materialu!! ");
                                        $('#popover').attr('disabled', 'true');
                                        count.classList.remove("green");
                                        count.classList.add("red");

                                    }
                                    else if (JSON.stringify(data) == 1) {
                                        $('#warningText').text("");
                                        $('#popover').removeAttr('disabled');
                                        count.classList.remove("red");
                                        count.classList.add("green");
                                    }

                                }
                            })
                        });
                        GetDoc('chekBoxSection').hidden = true;
                    }
                    else {
                        RemHidden('#chekBoxSection');
                        GetDoc('enterNumberSection').hidden = true;
                        $('#saveChSection').removeAttr('disabled');
                        GetDoc('saveNSection').disabled = true;
                        $.each(data['items'], function (index, value) {
                            if (data['items'] != null) {
                                if (index % 2 == 0) {
                                    $('#list').append("<li class='list-group-item'><input class='form-check-input' value='" + data['items'][index]['item1'] + "' type='checkbox' id='ingredient1" + index + "' />" +
                                        "<label class='form-check-label' for='Check' id='label' style='margin-left:10px;'>" + data['items'][index]['item2'] + "</label></li > ")
                                }
                                else {
                                    $('#list2').append("<li class='list-group-item'><input class='form-check-input' value='" + data['items'][index]['item1'] + "' type='checkbox' id='ingredient2"+index+"' />" +
                                        "<label class='form-check-label' for='Check' id='label' style='margin-left:10px;'>" + data['items'][index]['item2'] + "</label></li > ")
                                }
                            }
                        })


                        $.each(data['opakowania'], function (index, value) {
                            if (data['opakowania'][index] != null) {
                                if (index % 2 == 0) {
                                    $('#list').append("<li class='list-group-item'><input class='form-check-input' value='" + data['opakowania'][index]['materialNumber'] + "' type='checkbox' id='ingredient3" + index + "' />" +
                                        "<label class='form-check-label' for='Check' id='label' style='margin-left:10px;'>" + data['opakowania'][index]['name'] + "</label></li > ")
                                }
                                else {
                                    $('#list2').append("<li class='list-group-item'><input class='form-check-input' value='" + data['opakowania'][index]['materialNumber'] + "' type='checkbox' id='ingredient4"+index+"' />" +
                                        "<label class='form-check-label' for='Check' id='label' style='margin-left:10px;'>" + data['opakowania'][index]['name'] + "</label></li > ")
                                }
                            }
                        })

                    }
                }
            })
        })
    })
        window.onload = function () {
            var selItem = sessionStorage.getItem("SelItem");
            var process = sessionStorage.getItem("Process");
            var machine = sessionStorage.getItem("Machines");
            var machineValues = sessionStorage.getItem("Values");
            var optionSelected = sessionStorage.getItem("Option");


            if (selItem == null && process == null) {
                $('#zleceniaList').val('-1');
                $('#processList').val('-1');
                Hidden('#machineBlock');
            }
            else {

                RemHidden('#machineBlock');
                $('#zleceniaList').val(selItem);
                $('#processList').val(process);
                var list = document.querySelector('.machinesList');
                var machinesFromStorage = JSON.parse(machine);
                var machinesFromStorageValues = JSON.parse(machineValues);
                for (var i = 0; i < machinesFromStorage.length; i++) {
                    var option = new Option(machinesFromStorage[i], parseInt(machinesFromStorageValues[i]));
                    list.add(option);
                }

                $('#machinesList').val(optionSelected);
                if (optionSelected != null && optionSelected != -1) {
                    RemHidden('#nZamówienie');
                }
                else {
                    Hidden('#nZamówienie')
                }
            }

        }
        function SelectBoxes() {
            var num = $('#count').val();
            if (num == 0) {
                RemHidden('#list');
                RemHidden('#list2');
                $('#count').val(num + 1);
            } else {
                Hidden('#list');
                Hidden('#list2');
                $('#count').val(num - 1);
                $('.form-check-input').prop('checked', false);
            }
        }
        function EmptyContainer() {
            $('#container').empty();
            var table = "<table id='orders' class='table table-striped table-bordered display' style='width: 100%; margin-top: 50px;'>" +
                "<thead><tr><th></th><th id='nMaterialu'>Nr. materialu</th>" +
                "<th id='nazwa'>Nazwa produktu</th><th id='count'>Ilość (kg/szt.)</th>" +
                "<th></th></tr ></thead ></table>";
            $('#container').html(table);
        }
        function CheckComent(elem) {

            if (elem.value.length > 20) {
                $('#saveNSection').removeAttr('disabled');
                $('#popperWarningText').text('');
            }
            else {
                $('#saveNSection').attr('disabled', 'true');
                $('#popperWarningText').text('Prosze zostawić bardziej rozszerzony komentarz!');
            }

        }
        function TableUpdate() {
            $('#orders').DataTable({
                dom: 'Bfrtip',
                ajax: {
                    url: '/MachineProcess/GetOrdersBySelect',
                    type: 'GET',
                    data: { "numerZlecenia": $('#zleceniaList option:selected').val(), "processId": $('#processList option:selected').val(), "machineId": $('#machinesList option:selected').val() },
                    dataSrc: ''
                },
                rowId: 'Id',
                columnDefs: [
                    { className: 'dt-body-center', targets: [0, 1, 2, 3, 4] },
                    {
                        targets: [1, 2, 3, 4],
                        className: 'dt-head-center'
                    },
                    {
                        targets: 0,
                        width: '8%'
                    },
                    {
                        targets: [1],
                        width: '20%'
                    },
                    {
                        targets: [2],
                        width: '25%'
                    },
                    {
                        targets: [3],
                        width: '15%'
                    },

                    {
                        targets: [4],
                        width: '32%'
                    }

                ],

                columns: [
                    {
                        data: "item4", "render": function (data) {
                            if (data == "Dostarczone") {
                                return "<div style='width:100%; position: center'><i class='bi bi-unlock-fill'></i></div >";
                            }
                            else {
                                return "<div style='width:100%; position: center'><i class='bi bi-lock-fill'></i></div >";
                            }
                        }
                    },

                    {
                        data: "item1",
                        className: "columnClick"
                    },
                    { data: "item2" },
                    { data: "item3" },

                    {
                        data: "id", "render": function (data) {
                            return "<div style='width:100%; position: center'><div class='btn-group' role='group' id='groupButton'><a class='btn btn-success btn-small' style = 'height: 5%; margin-left: 5px; margin-right: 5px;' data-toggle='modal' onclick='Details(" + data + ")'>Szczegóły</a><a class='btn btn-danger btn-small' style='height: 5 %' onclick=Delete(" + data + ") id='Delete' >Usuń zlecenie</a></div ></div >"
                        },
                        orderable: false,
                        searchable: false,
                        width: "150px"
                    }
                ]
            });
            $('#orders tbody').on('click', '.columnClick', function (e) {
                navigator.clipboard.writeText($('#orders').DataTable().cell(this).data());
                $('#alertModal').modal('show');
                $('#textAlert').text('Copied!');
                setTimeout(function () {
                    $('#alertModal').modal('hide');
                }, 1000);
            })
        }
        function AddByNum() {
            Add($("#nrMaterialu"), 'SetByNumberInput', parseInt(count.value), $('#zleceniaList option:selected').val(), $('#processList option:selected').val(), $('#machinesList option:selected').val());
            $('#newOrder').find('#noweZamówienie').trigger('reset');
            $('#popover').attr('disabled', 'true');
            $('#warningText').text('');
            setTimeout(function () { $('#orders').DataTable().ajax.reload() }, 200);
        }
        function Check() {;
            Add($("input.form-check-input:checked"), 'PostMethod', 0, $('#zleceniaList option:selected').val(), $('#processList option:selected').val(), $('#machinesList option:selected').val());
           // setTimeout(function () { $('#orders').DataTable().ajax.reload() }, 200);
            setTimeout(function () { document.location.reload() }, 300);
        }
        function Add(inputValue, actionName, count, zlecenieNr, processId, machineId) {
            var favorite = [];
            $.each($(inputValue), function () {
                favorite.push($(this).val());
                /////-->work fine ---> favorite.push($('#nrMaterialu').val());
            });
            var dataPass = [];
            for (var i = 0; i < favorite.length; i++) {
                dataPass.push({
                    "id": i, "ingredient": favorite[i],
                    "itemId": parseInt(zlecenieNr),
                    "processId": parseInt(processId),
                    "machineId": parseInt(machineId),
                    "count": count
                });
            }
            $.ajax({
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                url: '/MachineProcess/' + actionName,
                data: JSON.stringify(dataPass),
                success: function (data) {
                    $('#alertModal').modal('show');
                    $('#textAlert').text('Zamówienie przyjęte do realizacji!');
                    setTimeout(function () {
                        $('#alertModal').modal('hide');
                    }, 1500);

                },
                error: function (data) {
                    $('#alertModal').modal('show');
                    $('#textAlert').text('Wystąpił problem!');
                    $('#textAlert').css({ "text - align": "center", "color": "red", "font-weight": 600 });
                    setTimeout(function () {
                        $('#alertModal').modal('hide');
                    }, 1500);

                }
            });
        }
        function Copy(input) {
            alert(input);
        }
        function GetDoc(elem) {
            return document.getElementById(elem);
        }
        function Hidden(elem) {
            return $(elem).attr('hidden', 'true');
        }
        function RemHidden(elem) {
            return $(elem).removeAttr('hidden');
        }
        function SaveCookies(id, cookieValue, cookieName) {
            var sel = document.getElementById(id);

            saveclass = saveclass ? saveclass : document.body.className;
            document.body.className = saveclass + ' ' + sel.value;

            SetCookies(cookieName, cookieValue, 365);
        }

        function SetCookies(cookieName, cookieValue, nDays) {
            var today = new Date();
            var expire = new Date();

            if (nDays == null || nDays == 0)
                nDays = 1;

            expire.setTime(today.getTime() + 3600000 * 24 * nDays);
            document.cookie = cookieName + "=" + escape(cookieValue) + ";expires=" + expire.toGMTString();
        }
        function readCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }
    </script>
}